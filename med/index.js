(()=>{let e,a=null,t=!1,n={},l=[],i=null;const r=e=>Math.floor(Math.random()*e),o=e=>new Promise(((a,t)=>{try{e.onload=()=>{s(e),a()}}catch(e){console.log(e),t(e)}})),c=e=>{l.forEach((a=>{a.score+=e}))},d=()=>{let e=0,t=0,n=0;l.forEach((a=>{e+=a.score})),t=r(e);for(let e=0;e<l.length;e++)if(n+=l[e].score,n>t)return c(1),l[e].score=0,void(a=l[e]);console.log("new rank selection methode didnt find rank"),a=l[r(l.length)]},s=e=>{e.className="rankImage"},m=async()=>{let e=[],t=new Image;e.push(o(t)),t.src=a.image;let l=new Image;e.push(o(l)),l.src=a.imageKleur,await Promise.all(e),n.image=t,n.imageColor=l},h=async()=>{let a=document.createElement("DIV");e.addEventListener("click",g),t?a.appendChild(n.imageColor):a.appendChild(n.image),e.appendChild(a)},g=()=>{let t=e.firstChild;e.removeEventListener("click",g);let n=document.createElement("P");n.innerText=`${a.graad}`,n.className="graadText";let l=document.createElement("P");l.innerText=`${a.component}`,l.className="componentText";let i=document.createElement("P");i.innerText=`"${a.aanspreeknaam}"`,i.className="aanspreekText",t.appendChild(n),t.appendChild(l),t.appendChild(i),e.addEventListener("click",p)},p=async()=>{e.removeEventListener("click",p),d(),await m(),e.removeChild(e.firstChild),await h()};window.addEventListener("load",(async()=>{e=document.getElementById("rank"),document.getElementById("colorBtn").addEventListener("click",(()=>{t=!t,e.firstChild.replaceChild(t?n.imageColor:n.image,e.firstChild.getElementsByTagName("img")[0])})),l=await(await fetch("data.json")).json(),l.forEach((e=>{e.score=1})),i=l,d(),await m(),await h()}))})();