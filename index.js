(()=>{let e,t=null,n=!1,a={},o=[],c=[],l=!0,i=!0,s=!0,m=!0;const r=e=>Math.floor(Math.random()*e),d=async(n,a,o)=>{if(a){if(l+i+s+m==1)e.removeEventListener("click",u),e.removeChild(e.firstChild);else if(t.component===n){for(;t.component===n;)C();e.removeEventListener("click",u),await v(),e.removeChild(e.firstChild),await w()}p(n),o.target.className="componentBtnPressed"}else h(n),l+i+s+m===0&&(C(),await v(),await w()),o.target.className="componentBtn"},p=e=>{o=o.filter((t=>t.component!==e))},h=e=>{c.forEach((t=>{t.component===e&&o.push(t)}))},g=e=>new Promise(((t,n)=>{try{e.onload=()=>{f(e),t()}}catch(e){console.log(e),n(e)}})),E=e=>{o.forEach((t=>{t.score+=e}))},C=()=>{let e=0,n=0,a=0;o.forEach((t=>{e+=t.score})),n=r(e);for(let e=0;e<o.length;e++)if(a+=o[e].score,a>n)return E(1),o[e].score=0,void(t=o[e]);console.log("new rank selection methode didnt find rank"),t=o[r(o.length)]},f=e=>{e.className="rankImage"},v=async()=>{let e=[],n=new Image;e.push(g(n)),n.src=t.image;let o=new Image;e.push(g(o)),o.src=t.imageKleur,await Promise.all(e),a.image=n,a.imageColor=o},w=async()=>{let t=document.createElement("DIV");e.addEventListener("click",k),n?t.appendChild(a.imageColor):t.appendChild(a.image),e.appendChild(t)},k=()=>{let n=e.firstChild;e.removeEventListener("click",k);let a=document.createElement("P");a.innerText=`${t.graad}`,a.className="graadText";let o=document.createElement("P");o.innerText=`${t.component}`,o.className="componentText";let c=document.createElement("P");c.innerText=`"${t.aanspreeknaam}"`,c.className="aanspreekText",n.appendChild(a),n.appendChild(o),n.appendChild(c),e.addEventListener("click",u)},u=async()=>{e.removeEventListener("click",u),C(),await v(),e.removeChild(e.firstChild),await w()};window.addEventListener("load",(async()=>{let t=new Date;o=await fetch("data.json").json(),e=document.getElementById("rank"),document.getElementById("colorBtn").addEventListener("click",(()=>{n=!n,e.firstChild.replaceChild(n?a.imageColor:a.image,e.firstChild.getElementsByTagName("img")[0])})),document.getElementsByClassName("componentBtn")[0].addEventListener("click",(e=>{d("Landcomponent",l,e),l=!l})),document.getElementsByClassName("componentBtn")[1].addEventListener("click",(e=>{d("Medische component",i,e),i=!i})),document.getElementsByClassName("componentBtn")[2].addEventListener("click",(e=>{d("Luchtcomponent",s,e),s=!s})),document.getElementsByClassName("componentBtn")[3].addEventListener("click",(e=>{d("Marinecomponent",m,e),m=!m})),await o,console.log("time since load: "+(Date.now()-t)),o.forEach((e=>{e.score=1})),c=o,C(),await v(),await w()}))})();